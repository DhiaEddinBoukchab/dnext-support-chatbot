From: Saber Khalfallah </O=EXCHANGELABS/OU=EXCHANGE ADMINISTRATIVE GROUP (FYDIBOHF23SPDLT)/CN=RECIPIENTS/CN=EC49082C17FD4A35889594A9C7ADF53D-30DE44D7-0A>
To: Charlie Quaradeghini
Date: 2025-09-25 09:41:49.404000+00:00
Subject: RE: [EXTERNAL] RE: Unexpected api behaviour recently
Message-ID: GV0P278MB13208F8DBA49C564714A153CF81FA@GV0P278MB1320.CHEP278.PROD.OUTLOOK.COM
In-Reply-To: PAVP191MB2362C7D835C9B8959C21159D841FA@PAVP191MB2362.EURP191.PROD.OUTLOOK.COM

================================================================================

Hello Charlie,

 

Thank you for your response.

 

Below is the  python script I used to download the Freight dataset via the API 

 

I will highlight the wait_time so you can identify it and play it .

“

import requests

import pandas as pd

from io import BytesIO

import time

def _get_task_status(task_id, token):

    my_headers = {

        'Authorization': 'Bearer ' + token,

        'Content-Type': 'application/json'

    }

    success = False

    wait_time = 2

    while not success and wait_time < 30:

        time.sleep(wait_time)

        status_res = requests.get(f'https://api.dnext.io/v1.0/tasks/{task_id}', headers=my_headers)

        try:

            success = status_res.json()['status'] == 'SUCCEEDED'

        except:

            wait_time += 1

            continue

        if not success :

            wait_time += 1

        print("status",status_res.json()['status'])

    if success:

        return True

    else:

        return False

def download_dataset(code, token):

    my_headers = {

        'Authorization': 'Bearer ' + token,

        'Content-Type': 'application/json'

    }

    dl_url = f'https://api.dnext.io/v1.0/data/datasets/{code}/download'

    res = requests.post(dl_url, headers=my_headers)

    print(res)

    task_id = res.json()['task']['id']

    print(task_id)

    data_ready = _get_task_status(task_id, token)

    if data_ready:

        data_url = res.json()['result']['url']

        data_resp = requests.get(data_url)

        df = pd.read_csv(BytesIO(data_resp.content))

    else:

        df = None

    return df

df = download_dataset("thul-6a211b50-3b48-4e90-8f86-47e2e2b81909", token)

 

”

 

Please let me know if this helps you.

 

Best regards,

Saber Khalfallah

Customer Support

                                                                                                     saber.khalfallah@dnext.io <mailto:saber.khalfallah@dnext.io> 



 

 

DNEXT INTELLIGENCE SA | Avenue Louis-Casaï 81 | CH-1216 Cointrin

info@dnext.io <mailto:info@dnext.io>  | www.dnext.io <http://www.dnext.io/> 

 

 

From: Quaradeghini, Charlie <Charlie.Quaradeghini@mlp.com> 
Sent: Thursday, September 25, 2025 8:42
To: Saber Khalfallah <saber.khalfallah@dnext.io>
Subject: RE: [EXTERNAL] RE: Unexpected api behaviour recently

 

Hello Saber, 

 

Apologies for the slow response my end and thanks for your proactivity! 

Could you please send an example code snippet of where I should be passing the wait_time? It’s not a parameter I am currently passing in the api call, but there is a timeout=30 in the respects portion. 

 

resultdownload = requests.post(urlDataset, headers=headers, data=payload, timeout=30).json()

 

Thanks

 

From: Saber Khalfallah <saber.khalfallah@dnext.io <mailto:saber.khalfallah@dnext.io> > 
Sent: 24 September 2025 20:17
To: Quaradeghini, Charlie <Charlie.Quaradeghini@mlp.com <mailto:Charlie.Quaradeghini@mlp.com> >; Guillaume Goudy <guillaume.goudy@dnext.io <mailto:guillaume.goudy@dnext.io> >
Cc: Ruiz, Roberto <Roberto.Ruiz@mlp.com <mailto:Roberto.Ruiz@mlp.com> >; Support Dnext <support@dnext.io <mailto:support@dnext.io> >
Subject: [EXTERNAL] RE: Unexpected api behaviour recently

 

Hello Charlie,

 

I hope this email finds you well.

 

I wanted to check if you are still experiencing any issues with the API, or if everything is now running smoothly.

 

Looking forward to hearing from you.

 

Best regards,

Saber Khalfallah

Customer Support

                                                                                                     saber.khalfallah@dnext.io <mailto:saber.khalfallah@dnext.io> 



 

 

DNEXT INTELLIGENCE SA | Avenue Louis-Casaï 81 | CH-1216 Cointrin

info@dnext.io <mailto:info@dnext.io>  | www.dnext.io <http://www.dnext.io/> 

 

 

From: Saber Khalfallah 
Sent: Tuesday, September 23, 2025 15:35
To: 'Quaradeghini, Charlie' <Charlie.Quaradeghini@mlp.com <mailto:Charlie.Quaradeghini@mlp.com> >; Guillaume Goudy <guillaume.goudy@dnext.io <mailto:guillaume.goudy@dnext.io> >
Cc: Robero Ruiz <Roberto.Ruiz@mlp.com <mailto:Roberto.Ruiz@mlp.com> >
Subject: RE: Unexpected api behaviour recently

 

Hello Charlie,

 

I hope this email finds you well.

 

I'm writing to update you on the issue with the API that you have reported.

 

Our Dev Team found that the wait_time in the script needs to be increased when you download large files. We recommend setting the wait time to 30, as this has resolved the issue for even our largest datasets.

 

Please try this fix and let me know if it resolves the issue. If you continue to have any problems, please don't hesitate to reach out.

 

Best regards,

Saber Khalfallah

Customer Support

                                                                                                     saber.khalfallah@dnext.io <mailto:saber.khalfallah@dnext.io> 



 

 

DNEXT INTELLIGENCE SA | Avenue Louis-Casaï 81 | CH-1216 Cointrin

info@dnext.io <mailto:info@dnext.io>  | www.dnext.io <http://www.dnext.io/> 

 

 

From: Saber Khalfallah 
Sent: Tuesday, September 23, 2025 8:34
To: 'Quaradeghini, Charlie' <Charlie.Quaradeghini@mlp.com <mailto:Charlie.Quaradeghini@mlp.com> >; Guillaume Goudy <guillaume.goudy@dnext.io <mailto:guillaume.goudy@dnext.io> >
Cc: Robero Ruiz <Roberto.Ruiz@mlp.com <mailto:Roberto.Ruiz@mlp.com> >
Subject: RE: Unexpected api behaviour recently

 

Hello Charlie,

 

Thank you for reaching out to us.

 

We’ve raised this issue with our development team, and they are actively investigating it. We will update you as soon as we have more information.

 

To help us resolve this as quickly as possible, could you kindly share the code you are using, along with the dataset or tradematrix code that was being called when the error occurred? Additionally, if you can provide the specific time when this error happened, it would be extremely helpful in speeding up the investigation.

 

We appreciate your patience and understanding as we work on this.

 

Best regards,

Saber Khalfallah

Customer Support

                                                                                                     saber.khalfallah@dnext.io <mailto:saber.khalfallah@dnext.io> 



 

 

DNEXT INTELLIGENCE SA | Avenue Louis-Casaï 81 | CH-1216 Cointrin

info@dnext.io <mailto:info@dnext.io>  | www.dnext.io <http://www.dnext.io/> 

 

 

From: Quaradeghini, Charlie <Charlie.Quaradeghini@mlp.com <mailto:Charlie.Quaradeghini@mlp.com> > 
Sent: Tuesday, September 23, 2025 8:09
To: Guillaume Goudy <guillaume.goudy@dnext.io <mailto:guillaume.goudy@dnext.io> >; Saber Khalfallah <saber.khalfallah@dnext.io <mailto:saber.khalfallah@dnext.io> >
Cc: Robero Ruiz <Roberto.Ruiz@mlp.com <mailto:Roberto.Ruiz@mlp.com> >
Subject: Unexpected api behaviour recently

 

Hello, 

 

I have noticed that there are some troubles recently will calling data from the dnext api. Sometimes it fails, citing timeout errors (see below), and other times it runs as expected. This is code we have been using for some time and I suppose nothing major in the code has changed your end since it actually runs fine sometimes. However, it can take multiple attempts for the code to run properly, meaning that scheduled tasks often fail to complete.

 

The error usually looks like this:

 



 

If you need more details please let me know.

Thanks 

##########################################################
 

The information contained in this communication is confidential and intended only for the person(s) or entity(ies) to which it is addressed. If you are not a named addressee, please notify the sender immediately, delete this email from your system and do not disclose the email or any part of it to any person. Any views or opinions expressed in this email are those of the author and do not necessarily represent the views of MCP (Switzerland) GmbH or any of its affiliates. Therefore, this communication is not intended as an offer or solicitation for the purchase or sale of any financial instrument or as an official confirmation of any transaction. 

Electronic communications can be insecure and can contain errors, they can be intercepted, corrupted, lost, destroyed, incomplete or may contain viruses. Neither MCP (Switzerland) GmbH, its affiliates nor the sender can accept any liability for any kind of damages as the result of viruses or transmission errors or delays. Outgoing and incoming electronic communications of MCP (Switzerland) GmbH and its affiliates, including telephone communications, may be electronically archived and subject to review and/or disclosure to someone other than the recipient.

MCP (Switzerland) GmbH is a Swiss manager of collective assets authorized and regulated by the Swiss Financial Market Supervisory Authority (FINMA). MCP (Switzerland) GmbH is a limited liability company registered in Switzerland under company number CHE-216.367.660 and with its registered office at rue du Rhône 42, 1204 Geneva, Switzerland.
 
########################################################## 

##########################################################
 

The information contained in this communication is confidential and intended only for the person(s) or entity(ies) to which it is addressed. If you are not a named addressee, please notify the sender immediately, delete this email from your system and do not disclose the email or any part of it to any person. Any views or opinions expressed in this email are those of the author and do not necessarily represent the views of MCP (Switzerland) GmbH or any of its affiliates. Therefore, this communication is not intended as an offer or solicitation for the purchase or sale of any financial instrument or as an official confirmation of any transaction. 

Electronic communications can be insecure and can contain errors, they can be intercepted, corrupted, lost, destroyed, incomplete or may contain viruses. Neither MCP (Switzerland) GmbH, its affiliates nor the sender can accept any liability for any kind of damages as the result of viruses or transmission errors or delays. Outgoing and incoming electronic communications of MCP (Switzerland) GmbH and its affiliates, including telephone communications, may be electronically archived and subject to review and/or disclosure to someone other than the recipient.

MCP (Switzerland) GmbH is a Swiss manager of collective assets authorized and regulated by the Swiss Financial Market Supervisory Authority (FINMA). MCP (Switzerland) GmbH is a limited liability company registered in Switzerland under company number CHE-216.367.660 and with its registered office at rue du Rhône 42, 1204 Geneva, Switzerland.
 
########################################################## 
