{
  "emails": [
    {
      "subject": "RE: DCS-1273 RE: [EXTERNAL] DNEXT Platform - Update on data sharing ",
      "from": "Roberto.Ruiz@mlp.com",
      "from_name": "Ruiz, Roberto",
      "to": "Support Dnext; Saber Khalfallah",
      "cc": "",
      "received_time": "2025-05-05 10:06:09.574000+00:00",
      "sent_time": "2025-05-05 10:06:01+00:00",
      "body_text": "Noted – I’ll try this. Thanks for the quick reply.\r\n\r\n \r\n\r\nRegards\r\n\r\n \r\n\r\nFrom: Saber Khalfallah <jira@dnext.atlassian.net> \r\nSent: Monday, May 5, 2025 11:05 AM\r\nTo: Ruiz, Roberto <Roberto.Ruiz@mlp.com>\r\nSubject: DCS-1273 RE: [EXTERNAL] DNEXT Platform - Update on data sharing \r\n\r\n \r\n\r\n—-—-—-— \r\n\r\nReply above this line. \r\n\r\nSaber Khalfallah commented:\r\n\r\nHi Roberto,\r\n\r\nThanks for reaching out.\r\n\r\nThe issue you're experiencing is because the URL for downloading the TradeMatrix data changes when accessing aggregated data. Below is the correct script you need to use. Just insert your email and password where indicated, and it should work for you now.\r\n\r\nQuote :\r\n\r\nimport requests\r\n\r\nimport pandas as pd\r\n\r\nfrom io import BytesIO\r\n\r\nimport time\r\n\r\nimport json\r\n\r\n1.\tLogin to API and get token\r\n\r\ndef connect(email, pwd, env):\r\n\r\n'''\r\n\r\nemail: email used to connect to your dnext environment\r\n\r\npwd: password\r\n\r\nenv: name of your enviroment, first part in your dnext URL before the dot\r\n\r\nENV.dnext.io -> env = 'ENV'\r\n\r\n'''\r\n\r\n1.\tLogin to API and get token\r\n\r\nurl = f'https://api.dnext.io/v1.0/auth/custom-login?org=\r\n\r\n{env}' \r\n\r\n\r\n\r\npayload = json.dumps({ \r\n\r\n'email': f'{email}', \r\n\r\n'password': f'{pwd}', \r\n\r\n'organization': f'{env} \r\n\r\n'\r\n\r\n})\r\n\r\nheaders =\r\n\r\n{ 'Content-Type': 'application/json' } \r\n\r\nresponse = requests.post(url, headers=headers, data=payload)\r\n\r\ntoken = response.json()['token']\r\n\r\nreturn token\r\n\r\ntoken = connect(\"youremail\",\"yourpassword\",\"thul\")\r\n\r\ndef _get_task_status(task_id, token):\r\n\r\nmy_headers =\r\n\r\n{ 'Authorization': 'Bearer ' + token, 'Content-Type': 'application/json' } \r\n\r\nsuccess = False\r\n\r\nwait_time = 2\r\n\r\nwhile not success and wait_time < 30:\r\n\r\ntime.sleep(wait_time)\r\n\r\nstatus_res = requests.get(f'https://api.dnext.io/v1.0/tasks/\r\n\r\n{task_id} \r\n\r\n', headers=my_headers)\r\n\r\ntry:\r\n\r\nsuccess = status_res.json()['status'] == 'SUCCEEDED'\r\n\r\nexcept:\r\n\r\nwait_time += 1\r\n\r\ncontinue\r\n\r\nif not success:\r\n\r\nwait_time += 1\r\n\r\nif success:\r\n\r\nreturn True\r\n\r\nelse:\r\n\r\nreturn False\r\n\r\ndef download_tradeflow(code, token):\r\n\r\nmy_headers =\r\n\r\n{ 'Authorization': 'Bearer ' + token, 'Content-Type': 'application/json' } \r\n\r\ndata = {\"intraflows\":\r\n\r\n{\"strategy\":\"exclude\"} \r\n\r\n,\"row\":False,\"refresh\":True,\"format\":\"csv\"}\r\n\r\ndl_url = f'https://api.dnext.io/v1.0/fundamentals/tradeflows/aggregations/\r\n\r\n/download'\r\n\r\nres = requests.post(dl_url, headers=my_headers, data=json.dumps(data))\r\n\r\nprint(res.json())\r\n\r\ntask_id = res.json()['task']['id']\r\n\r\ndata_ready = _get_task_status(task_id, token)\r\n\r\nif data_ready:\r\n\r\ndata_url = res.json()['result']['url']\r\n\r\ndata_resp = requests.get(data_url)\r\n\r\ndf = pd.read_csv(BytesIO(data_resp.content))\r\n\r\nelse:\r\n\r\ndf = None\r\n\r\nreturn df\r\n\r\ndf = download_tradeflow(\"thul-bca3ea16-feb8-43d0-8709-b29e1e45c627\", token)\r\n\r\nUnquote\r\n\r\nPlease let me know if this works on your end.\r\n\r\nLooking forward to hearing back from you.\r\n\r\nBest regards\r\n\r\nSaber Khalfallah Customer Support\r\n\r\nsaber.khalfallah@dnext.io <mailto:saber.khalfallah@dnext.io> \r\n\r\n\t\t\r\n\r\n <https://dnext.atlassian.net/servicedesk/customer/request/30608/attachment/19684> | DNEXT INTELLIGENCE SA : Avenue Louis-Casaï 81 : CH-1216 Cointrin info@dnext.io <mailto:info@dnext.io>  : www.dnext.io <http://www.dnext.io/>  |\r\n\r\nView request <https://dnext.atlassian.net/servicedesk/customer/portal/1/DCS-1273?token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJ0Z3QiOiJhbm9ueW1vdXMtbGluayIsInFzaCI6ImE4MWI2NGFlNDZkZDc0OGM5MzMyYjc5YjQxZDQ3MTlkZjA3NWY3YWFlNjAyOGJlMDAzMGQyZTI1NDZjY2ZmZTEiLCJpc3MiOiJzZXJ2aWNlZGVzay1qd3QtdG9rZW4taXNzdWVyIiwiY29udGV4dCI6eyJ1c2VyIjoiMTAxNzIiLCJpc3N1ZSI6IkRDUy0xMjczIn0sImV4cCI6MTc0ODg1NTA3MCwiaWF0IjoxNzQ2NDM1ODcwfQ.RwrgvdAe-0rnNPYYwjfZgTyYPVYIbJh-ysTW13mn9I0&sda_source=notification-email>  · Turn off this request's notifications <https://dnext.atlassian.net/servicedesk/customer/portal/1/DCS-1273/unsubscribe?jwt=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJ0Z3QiOiJhbm9ueW1vdXMtbGluayIsInFzaCI6IjljNmE5MzQwZGQ4NTE5ZDhkZWZlNTljMTAxY2Q4YjQyYTFmMzFhYTUzNDVmOWRiMTlkZTAxM2E5N2QyMjIxZWYiLCJpc3MiOiJzZXJ2aWNlZGVzay1qd3QtdG9rZW4taXNzdWVyIiwiY29udGV4dCI6eyJ1c2VyIjoidWc6MDY0NzUyMTctZDAyYS00MmM1LWIyNWYtMzA5NzcxNGM3ZmYyIiwiaXNzdWUiOiJEQ1MtMTI3MyJ9LCJleHAiOjE3NDg4NTUwNzAsImlhdCI6MTc0NjQzNTg3MH0.V7L1P1c5ucFo6dbvI098lbiQKjhhHERjQmZRDH8D3G8> \r\n\r\nThis is shared with Roberto.Ruiz, Sami Jaballah, Mohamed Jebrane Ben Salem, and 2 other people.\r\n\r\nPowered by Jira Service Management <https://www.atlassian.com/software/jira/service-desk/powered-by?utm_medium=jira-in-product&utm_source=jira_service_desk_email_footer&utm_content=dnext> \r\n\r\nSent on May 5, 2025 11:04:30 AM CEST \r\n\r\n <https://atlas-trk.prd.msg.ss-inf.net/q/oNRBxRmx_XAJHervIQOsdg~~/AAAAARA~/Imz00xVld9FgmN1R2zZGFdF7k4RKjiWFsD0hYRFo8UUv_l-IRHMVqSS5aLpN8J_kpwIUONwERcfhKjCjcjjE1Q~~> \r\n\r\n##########################################################\r\n \r\nThe information contained in this communication is confidential and intended only for the person(s) or entity(ies) to which it is addressed. If you are not a named addressee, please notify the sender immediately, delete this email from your system and do not disclose the email or any part of it to any person. Any views or opinions expressed in this email are those of the author and do not necessarily represent the views of MCP (Switzerland) GmbH or any of its affiliates. Therefore, this communication is not intended as an offer or solicitation for the purchase or sale of any financial instrument or as an official confirmation of any transaction. \r\n\r\nElectronic communications can be insecure and can contain errors, they can be intercepted, corrupted, lost, destroyed, incomplete or may contain viruses. Neither MCP (Switzerland) GmbH, its affiliates nor the sender can accept any liability for any kind of damages as the result of viruses or transmission errors or delays. Outgoing and incoming electronic communications of MCP (Switzerland) GmbH and its affiliates, including telephone communications, may be electronically archived and subject to review and/or disclosure to someone other than the recipient.\r\n\r\nMCP (Switzerland) GmbH is a Swiss manager of collective assets authorized and regulated by the Swiss Financial Market Supervisory Authority (FINMA). MCP (Switzerland) GmbH is a limited liability company registered in Switzerland under company number CHE-216.367.660 and with its registered office at rue du Rhône 42, 1204 Geneva, Switzerland.\r\n \r\n########################################################## ",
      "body_html": "<html xmlns:v=\"urn:schemas-microsoft-com:vml\" xmlns:o=\"urn:schemas-microsoft-com:office:office\" xmlns:w=\"urn:schemas-microsoft-com:office:word\" xmlns:m=\"http://schemas.microsoft.com/office/2004/12/omml\" xmlns=\"http://www.w3.org/TR/REC-html40\"><head>\r\n\r\n<meta name=\"Generator\" content=\"Microsoft Word 15 (filtered medium)\">\r\n<base href=\"https://dnext.atlassian.net\"><!--[if !mso]><style>v\\:* {behavior:url(#default#VML);}\r\no\\:* {behavior:url(#default#VML);}\r\nw\\:* {behavior:url(#default#VML);}\r\n.shape {behavior:url(#default#VML);}\r\n</style><![endif]--><style><!--\r\n/* Font Definitions */\r\n@font-face\r\n\t{font-family:\"Cambria Math\";\r\n\tpanose-1:2 4 5 3 5 4 6 3 2 4;}\r\n@font-face\r\n\t{font-family:Calibri;\r\n\tpanose-1:2 15 5 2 2 2 4 3 2 4;}\r\n@font-face\r\n\t{font-family:Aptos;}\r\n@font-face\r\n\t{font-family:Consolas;\r\n\tpanose-1:2 11 6 9 2 2 4 3 2 4;}\r\n/* Style Definitions */\r\np.MsoNormal, li.MsoNormal, div.MsoNormal\r\n\t{margin:0cm;\r\n\tfont-size:12.0pt;\r\n\tfont-family:\"Aptos\",sans-serif;}\r\na:link, span.MsoHyperlink\r\n\t{mso-style-priority:99;\r\n\tcolor:blue;\r\n\ttext-decoration:underline;}\r\nspan.error\r\n\t{mso-style-name:error;}\r\nspan.jsd-link-separator\r\n\t{mso-style-name:jsd-link-separator;}\r\np.jsd-request-sharedwith, li.jsd-request-sharedwith, div.jsd-request-sharedwith\r\n\t{mso-style-name:jsd-request-sharedwith;\r\n\tmso-margin-top-alt:auto;\r\n\tmargin-right:0cm;\r\n\tmso-margin-bottom-alt:auto;\r\n\tmargin-left:0cm;\r\n\tfont-size:12.0pt;\r\n\tfont-family:\"Aptos\",sans-serif;}\r\nspan.EmailStyle25\r\n\t{mso-style-type:personal-reply;\r\n\tfont-family:\"Aptos\",sans-serif;\r\n\tcolor:windowtext;}\r\n.MsoChpDefault\r\n\t{mso-style-type:export-only;\r\n\tfont-size:10.0pt;\r\n\tmso-ligatures:none;}\r\n@page WordSection1\r\n\t{size:612.0pt 792.0pt;\r\n\tmargin:72.0pt 72.0pt 72.0pt 72.0pt;}\r\ndiv.WordSection1\r\n\t{page:WordSection1;}\r\n/* List Definitions */\r\n@list l0\r\n\t{mso-list-id:533538514;\r\n\tmso-list-template-ids:-334974618;}\r\n@list l1\r\n\t{mso-list-id:950748065;\r\n\tmso-list-template-ids:1923140560;}\r\nol\r\n\t{margin-bottom:0cm;}\r\nul\r\n\t{margin-bottom:0cm;}\r\n--></style><!--[if gte mso 9]><xml>\r\n<o:shapedefaults v:ext=\"edit\" spidmax=\"1026\" />\r\n</xml><![endif]--><!--[if gte mso 9]><xml>\r\n<o:shapelayout v:ext=\"edit\">\r\n<o:idmap v:ext=\"edit\" data=\"1\" />\r\n</o:shapelayout></xml><![endif]-->\r\n</head>\r\n<body lang=\"EN-US\" link=\"blue\" vlink=\"purple\" style=\"word-wrap:break-word\">\r\n<div class=\"WordSection1\">\r\n<p class=\"MsoNormal\"><span style=\"font-size:11.0pt\">Noted – I’ll try this. Thanks for the quick reply.<o:p></o:p></span></p>\r\n<p class=\"MsoNormal\"><span style=\"font-size:11.0pt\"><o:p>&nbsp;</o:p></span></p>\r\n<p class=\"MsoNormal\"><span style=\"font-size:11.0pt\">Regards<o:p></o:p></span></p>\r\n<p class=\"MsoNormal\"><span style=\"font-size:11.0pt\"><o:p>&nbsp;</o:p></span></p>\r\n<div>\r\n<div style=\"border:none;border-top:solid #E1E1E1 1.0pt;padding:3.0pt 0cm 0cm 0cm\">\r\n<p class=\"MsoNormal\"><b><span style=\"font-size:11.0pt;font-family:&quot;Calibri&quot;,sans-serif\">From:</span></b><span style=\"font-size:11.0pt;font-family:&quot;Calibri&quot;,sans-serif\"> Saber Khalfallah &lt;jira@dnext.atlassian.net&gt;\r\n<br>\r\n<b>Sent:</b> Monday, May 5, 2025 11:05 AM<br>\r\n<b>To:</b> Ruiz, Roberto &lt;Roberto.Ruiz@mlp.com&gt;<br>\r\n<b>Subject:</b> DCS-1273 RE: [EXTERNAL] DNEXT Platform - Update on data sharing <o:p>\r\n</o:p></span></p>\r\n</div>\r\n</div>\r\n<p class=\"MsoNormal\"><o:p>&nbsp;</o:p></p>\r\n<div>\r\n<p class=\"MsoNormal\"><span style=\"font-size:10.5pt;font-family:&quot;Arial&quot;,sans-serif;color:#999999\">—-—-—-—\r\n<o:p></o:p></span></p>\r\n</div>\r\n<div style=\"margin-bottom:22.5pt\">\r\n<p class=\"MsoNormal\"><span style=\"font-size:10.5pt;font-family:&quot;Arial&quot;,sans-serif;color:#999999\">Reply above this line.\r\n<o:p></o:p></span></p>\r\n</div>\r\n<div style=\"margin-bottom:22.5pt\">\r\n<div>\r\n<p><span style=\"font-size:10.5pt;font-family:&quot;Arial&quot;,sans-serif;color:#333333\">Saber Khalfallah commented:<o:p></o:p></span></p>\r\n<p><span style=\"font-size:10.5pt;font-family:&quot;Arial&quot;,sans-serif;color:#333333\">Hi Roberto,<o:p></o:p></span></p>\r\n<p><span style=\"font-size:10.5pt;font-family:&quot;Arial&quot;,sans-serif;color:#333333\">Thanks for reaching out.<o:p></o:p></span></p>\r\n<p><span style=\"font-size:10.5pt;font-family:&quot;Arial&quot;,sans-serif;color:#333333\">The issue you're experiencing is because the URL for downloading the TradeMatrix data changes when accessing aggregated data. Below is the correct script you need to use. Just insert\r\n your email and password where indicated, and it should work for you now.<o:p></o:p></span></p>\r\n<p><b><span style=\"font-size:10.5pt;font-family:&quot;Arial&quot;,sans-serif;color:#333333\">Quote :</span></b><span style=\"font-size:10.5pt;font-family:&quot;Arial&quot;,sans-serif;color:#333333\"><o:p></o:p></span></p>\r\n<p><span style=\"font-size:10.5pt;font-family:&quot;Arial&quot;,sans-serif;color:#333333\">import requests<o:p></o:p></span></p>\r\n<p><span style=\"font-size:10.5pt;font-family:&quot;Arial&quot;,sans-serif;color:#333333\">import pandas as pd<o:p></o:p></span></p>\r\n<p><span style=\"font-size:10.5pt;font-family:&quot;Arial&quot;,sans-serif;color:#333333\">from io import BytesIO<o:p></o:p></span></p>\r\n<p><span style=\"font-size:10.5pt;font-family:&quot;Arial&quot;,sans-serif;color:#333333\">import time<o:p></o:p></span></p>\r\n<p><span style=\"font-size:10.5pt;font-family:&quot;Arial&quot;,sans-serif;color:#333333\">import json<o:p></o:p></span></p>\r\n<ol start=\"1\" type=\"1\">\r\n<li class=\"MsoNormal\" style=\"color:#333333;mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;mso-list:l1 level1 lfo1\">\r\n<span style=\"font-size:10.5pt;font-family:&quot;Arial&quot;,sans-serif\">Login to API and get token<o:p></o:p></span></li></ol>\r\n<p><span style=\"font-size:10.5pt;font-family:&quot;Arial&quot;,sans-serif;color:#333333\">def connect(email, pwd, env):<o:p></o:p></span></p>\r\n<p><span style=\"font-size:10.5pt;font-family:&quot;Arial&quot;,sans-serif;color:#333333\">'''<o:p></o:p></span></p>\r\n<p><span style=\"font-size:10.5pt;font-family:&quot;Arial&quot;,sans-serif;color:#333333\">email: email used to connect to your dnext environment<o:p></o:p></span></p>\r\n<p><span style=\"font-size:10.5pt;font-family:&quot;Arial&quot;,sans-serif;color:#333333\">pwd: password<o:p></o:p></span></p>\r\n<p><span style=\"font-size:10.5pt;font-family:&quot;Arial&quot;,sans-serif;color:#333333\">env: name of your enviroment, first part in your dnext URL before the dot<o:p></o:p></span></p>\r\n<p><span style=\"font-size:10.5pt;font-family:&quot;Arial&quot;,sans-serif;color:#333333\">ENV.dnext.io -&gt; env = 'ENV'<o:p></o:p></span></p>\r\n<p><span style=\"font-size:10.5pt;font-family:&quot;Arial&quot;,sans-serif;color:#333333\">'''<o:p></o:p></span></p>\r\n<ol start=\"1\" type=\"1\">\r\n<li class=\"MsoNormal\" style=\"color:#333333;mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;mso-list:l0 level1 lfo2\">\r\n<span style=\"font-size:10.5pt;font-family:&quot;Arial&quot;,sans-serif\">Login to API and get token<o:p></o:p></span></li></ol>\r\n<p><span style=\"font-size:10.5pt;font-family:&quot;Arial&quot;,sans-serif;color:#333333\">url = f'https://api.dnext.io/v1.0/auth/custom-login?org=<o:p></o:p></span></p>\r\n<p class=\"MsoNormal\"><span style=\"font-size:10.5pt;font-family:&quot;Arial&quot;,sans-serif;color:#333333\">{env}'\r\n<br>\r\n<br>\r\n<br>\r\n<br>\r\npayload = json.dumps({ <br>\r\n<br>\r\n'email': f'{email}', <br>\r\n<br>\r\n'password': f'{pwd}', <br>\r\n<br>\r\n'organization': f'{env} <o:p></o:p></span></p>\r\n<p><span style=\"font-size:10.5pt;font-family:&quot;Arial&quot;,sans-serif;color:#333333\">'<o:p></o:p></span></p>\r\n<p><span style=\"font-size:10.5pt;font-family:&quot;Arial&quot;,sans-serif;color:#333333\">})<o:p></o:p></span></p>\r\n<p><span style=\"font-size:10.5pt;font-family:&quot;Arial&quot;,sans-serif;color:#333333\">headers =<o:p></o:p></span></p>\r\n<p class=\"MsoNormal\"><span style=\"font-size:10.5pt;font-family:&quot;Arial&quot;,sans-serif;color:#333333\">{ 'Content-Type': 'application/json' }\r\n<o:p></o:p></span></p>\r\n<p><span style=\"font-size:10.5pt;font-family:&quot;Arial&quot;,sans-serif;color:#333333\">response = requests.post(url, headers=headers, data=payload)<o:p></o:p></span></p>\r\n<p><span style=\"font-size:10.5pt;font-family:&quot;Arial&quot;,sans-serif;color:#333333\">token = response.json()<span class=\"error\">['token']</span><o:p></o:p></span></p>\r\n<p><span style=\"font-size:10.5pt;font-family:&quot;Arial&quot;,sans-serif;color:#333333\">return token<o:p></o:p></span></p>\r\n<p><span style=\"font-size:10.5pt;font-family:&quot;Arial&quot;,sans-serif;color:#333333\">token = connect(&quot;youremail&quot;,&quot;yourpassword&quot;,&quot;thul&quot;)<o:p></o:p></span></p>\r\n<p><span style=\"font-size:10.5pt;font-family:&quot;Arial&quot;,sans-serif;color:#333333\">def _get_task_status(task_id, token):<o:p></o:p></span></p>\r\n<p><span style=\"font-size:10.5pt;font-family:&quot;Arial&quot;,sans-serif;color:#333333\">my_headers =<o:p></o:p></span></p>\r\n<p class=\"MsoNormal\"><span style=\"font-size:10.5pt;font-family:&quot;Arial&quot;,sans-serif;color:#333333\">{ 'Authorization': 'Bearer ' + token, 'Content-Type': 'application/json' }\r\n<o:p></o:p></span></p>\r\n<p><span style=\"font-size:10.5pt;font-family:&quot;Arial&quot;,sans-serif;color:#333333\">success = False<o:p></o:p></span></p>\r\n<p><span style=\"font-size:10.5pt;font-family:&quot;Arial&quot;,sans-serif;color:#333333\">wait_time = 2<o:p></o:p></span></p>\r\n<p><span style=\"font-size:10.5pt;font-family:&quot;Arial&quot;,sans-serif;color:#333333\">while not success and wait_time &lt; 30:<o:p></o:p></span></p>\r\n<p><span style=\"font-size:10.5pt;font-family:&quot;Arial&quot;,sans-serif;color:#333333\">time.sleep(wait_time)<o:p></o:p></span></p>\r\n<p><span style=\"font-size:10.5pt;font-family:&quot;Arial&quot;,sans-serif;color:#333333\">status_res = requests.get(f'https://api.dnext.io/v1.0/tasks/<o:p></o:p></span></p>\r\n<p class=\"MsoNormal\"><span style=\"font-size:10.5pt;font-family:&quot;Arial&quot;,sans-serif;color:#333333\">{task_id}\r\n<o:p></o:p></span></p>\r\n<p><span style=\"font-size:10.5pt;font-family:&quot;Arial&quot;,sans-serif;color:#333333\">', headers=my_headers)<o:p></o:p></span></p>\r\n<p><span style=\"font-size:10.5pt;font-family:&quot;Arial&quot;,sans-serif;color:#333333\">try:<o:p></o:p></span></p>\r\n<p><span style=\"font-size:10.5pt;font-family:&quot;Arial&quot;,sans-serif;color:#333333\">success = status_res.json()<span class=\"error\">['status']</span> == 'SUCCEEDED'<o:p></o:p></span></p>\r\n<p><span style=\"font-size:10.5pt;font-family:&quot;Arial&quot;,sans-serif;color:#333333\">except:<o:p></o:p></span></p>\r\n<p><span style=\"font-size:10.5pt;font-family:&quot;Arial&quot;,sans-serif;color:#333333\">wait_time += 1<o:p></o:p></span></p>\r\n<p><span style=\"font-size:10.5pt;font-family:&quot;Arial&quot;,sans-serif;color:#333333\">continue<o:p></o:p></span></p>\r\n<p><span style=\"font-size:10.5pt;font-family:&quot;Arial&quot;,sans-serif;color:#333333\">if not success:<o:p></o:p></span></p>\r\n<p><span style=\"font-size:10.5pt;font-family:&quot;Arial&quot;,sans-serif;color:#333333\">wait_time += 1<o:p></o:p></span></p>\r\n<p><span style=\"font-size:10.5pt;font-family:&quot;Arial&quot;,sans-serif;color:#333333\">if success:<o:p></o:p></span></p>\r\n<p><span style=\"font-size:10.5pt;font-family:&quot;Arial&quot;,sans-serif;color:#333333\">return True<o:p></o:p></span></p>\r\n<p><span style=\"font-size:10.5pt;font-family:&quot;Arial&quot;,sans-serif;color:#333333\">else:<o:p></o:p></span></p>\r\n<p><span style=\"font-size:10.5pt;font-family:&quot;Arial&quot;,sans-serif;color:#333333\">return False<o:p></o:p></span></p>\r\n<p><span style=\"font-size:10.5pt;font-family:&quot;Arial&quot;,sans-serif;color:#333333\">def download_tradeflow(code, token):<o:p></o:p></span></p>\r\n<p><span style=\"font-size:10.5pt;font-family:&quot;Arial&quot;,sans-serif;color:#333333\">my_headers =<o:p></o:p></span></p>\r\n<p class=\"MsoNormal\"><span style=\"font-size:10.5pt;font-family:&quot;Arial&quot;,sans-serif;color:#333333\">{ 'Authorization': 'Bearer ' + token, 'Content-Type': 'application/json' }\r\n<o:p></o:p></span></p>\r\n<p><span style=\"font-size:10.5pt;font-family:&quot;Arial&quot;,sans-serif;color:#333333\">data = {&quot;intraflows&quot;:<o:p></o:p></span></p>\r\n<p class=\"MsoNormal\"><span style=\"font-size:10.5pt;font-family:&quot;Arial&quot;,sans-serif;color:#333333\">{&quot;strategy&quot;:&quot;exclude&quot;}\r\n<o:p></o:p></span></p>\r\n<p><span style=\"font-size:10.5pt;font-family:&quot;Arial&quot;,sans-serif;color:#333333\">,&quot;row&quot;:False,&quot;refresh&quot;:True,&quot;format&quot;:&quot;csv&quot;}<o:p></o:p></span></p>\r\n<p><span style=\"font-size:10.5pt;font-family:&quot;Arial&quot;,sans-serif;color:#333333\">dl_url = f'https://api.dnext.io/v1.0/fundamentals/tradeflows/aggregations/<o:p></o:p></span></p>\r\n<p><span style=\"font-size:10.5pt;font-family:&quot;Arial&quot;,sans-serif;color:#333333\">/download'<o:p></o:p></span></p>\r\n<p><span style=\"font-size:10.5pt;font-family:&quot;Arial&quot;,sans-serif;color:#333333\">res = requests.post(dl_url, headers=my_headers, data=json.dumps(data))<o:p></o:p></span></p>\r\n<p><span style=\"font-size:10.5pt;font-family:&quot;Arial&quot;,sans-serif;color:#333333\">print(res.json())<o:p></o:p></span></p>\r\n<p><span style=\"font-size:10.5pt;font-family:&quot;Arial&quot;,sans-serif;color:#333333\">task_id = res.json()<span class=\"error\">['task']['id']</span><o:p></o:p></span></p>\r\n<p><span style=\"font-size:10.5pt;font-family:&quot;Arial&quot;,sans-serif;color:#333333\">data_ready = _get_task_status(task_id, token)<o:p></o:p></span></p>\r\n<p><span style=\"font-size:10.5pt;font-family:&quot;Arial&quot;,sans-serif;color:#333333\">if data_ready:<o:p></o:p></span></p>\r\n<p><span style=\"font-size:10.5pt;font-family:&quot;Arial&quot;,sans-serif;color:#333333\">data_url = res.json()<span class=\"error\">['result']['url']</span><o:p></o:p></span></p>\r\n<p><span style=\"font-size:10.5pt;font-family:&quot;Arial&quot;,sans-serif;color:#333333\">data_resp = requests.get(data_url)<o:p></o:p></span></p>\r\n<p><span style=\"font-size:10.5pt;font-family:&quot;Arial&quot;,sans-serif;color:#333333\">df = pd.read_csv(BytesIO(data_resp.content))<o:p></o:p></span></p>\r\n<p><span style=\"font-size:10.5pt;font-family:&quot;Arial&quot;,sans-serif;color:#333333\">else:<o:p></o:p></span></p>\r\n<p><span style=\"font-size:10.5pt;font-family:&quot;Arial&quot;,sans-serif;color:#333333\">df = None<o:p></o:p></span></p>\r\n<p><span style=\"font-size:10.5pt;font-family:&quot;Arial&quot;,sans-serif;color:#333333\">return df<o:p></o:p></span></p>\r\n<p><span style=\"font-size:10.5pt;font-family:&quot;Arial&quot;,sans-serif;color:#333333\">df = download_tradeflow(&quot;thul-bca3ea16-feb8-43d0-8709-b29e1e45c627&quot;, token)<o:p></o:p></span></p>\r\n<p><b><span style=\"font-size:10.5pt;font-family:&quot;Arial&quot;,sans-serif;color:#333333\">Unquote</span></b><span style=\"font-size:10.5pt;font-family:&quot;Arial&quot;,sans-serif;color:#333333\"><o:p></o:p></span></p>\r\n<p><span style=\"font-size:10.5pt;font-family:&quot;Arial&quot;,sans-serif;color:#333333\">Please let me know if this works on your end.<o:p></o:p></span></p>\r\n<p><span style=\"font-size:10.5pt;font-family:&quot;Arial&quot;,sans-serif;color:#333333\">Looking forward to hearing back from you.<o:p></o:p></span></p>\r\n<p><span style=\"font-size:10.5pt;font-family:&quot;Arial&quot;,sans-serif;color:#333333\">Best regards<o:p></o:p></span></p>\r\n<div>\r\n<table class=\"MsoNormalTable\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\" style=\"margin-left:1.5pt;border-collapse:collapse\">\r\n<tbody>\r\n<tr>\r\n<td width=\"0\" style=\"width:.3pt;border:solid #CCCCCC 1.0pt;padding:2.25pt 3.0pt 2.25pt 3.0pt\">\r\n<p class=\"MsoNormal\" style=\"mso-margin-top-alt:3.75pt;margin-right:0cm;margin-bottom:3.75pt;margin-left:0cm\">\r\n<b><span style=\"color:#1F497D\">Saber Khalfallah</span></b> <span style=\"color:#1F497D\">\r\nCustomer Support</span><o:p></o:p></p>\r\n</td>\r\n<td width=\"0\" style=\"width:.3pt;border:solid #CCCCCC 1.0pt;border-left:none;padding:2.25pt 3.0pt 2.25pt 3.0pt\">\r\n<p class=\"MsoNormal\" style=\"mso-margin-top-alt:3.75pt;margin-right:0cm;margin-bottom:3.75pt;margin-left:0cm\">\r\n<a href=\"mailto:saber.khalfallah@dnext.io\">saber.khalfallah@dnext.io</a><o:p></o:p></p>\r\n</td>\r\n</tr>\r\n<tr>\r\n<td style=\"padding:.75pt .75pt .75pt .75pt\"></td>\r\n<td style=\"padding:.75pt .75pt .75pt .75pt\"></td>\r\n</tr>\r\n</tbody>\r\n</table>\r\n</div>\r\n<p><a href=\"https://dnext.atlassian.net/servicedesk/customer/request/30608/attachment/19684\" title=\"&quot;image001.png&quot;\"><span style=\"font-size:10.5pt;font-family:&quot;Arial&quot;,sans-serif;text-decoration:none\"><img border=\"0\" width=\"111\" height=\"121\" style=\"width:1.1562in;height:1.2604in\" id=\"Picture_x0020_2\" src=\"cid:image001.jpg@01DBBDAD.AECE9E50\"></span></a><span style=\"font-size:10.5pt;font-family:&quot;Arial&quot;,sans-serif;color:#333333\">|\r\n</span><b><span style=\"font-size:10.5pt;font-family:&quot;Arial&quot;,sans-serif;color:#1F497D\">DNEXT INTELLIGENCE SA</span></b><span style=\"font-size:10.5pt;font-family:&quot;Arial&quot;,sans-serif;color:#333333\">\r\n</span><span style=\"font-size:10.5pt;font-family:&quot;Arial&quot;,sans-serif;color:#1F497D\">: Avenue Louis-Casaï 81 : CH-1216 Cointrin</span><span style=\"font-size:10.5pt;font-family:&quot;Arial&quot;,sans-serif;color:#333333\">\r\n<a href=\"mailto:info@dnext.io\">info@dnext.io</a> </span><span style=\"font-size:10.5pt;font-family:&quot;Arial&quot;,sans-serif;color:#1F497D\">:</span><span style=\"font-size:10.5pt;font-family:&quot;Arial&quot;,sans-serif;color:#333333\">\r\n<a href=\"http://www.dnext.io/\">www.dnext.io</a> |<o:p></o:p></span></p>\r\n</div>\r\n</div>\r\n<p><span style=\"font-size:10.5pt;font-family:&quot;Arial&quot;,sans-serif;color:#333333\"><a href=\"https://dnext.atlassian.net/servicedesk/customer/portal/1/DCS-1273?token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJ0Z3QiOiJhbm9ueW1vdXMtbGluayIsInFzaCI6ImE4MWI2NGFlNDZkZDc0OGM5MzMyYjc5YjQxZDQ3MTlkZjA3NWY3YWFlNjAyOGJlMDAzMGQyZTI1NDZjY2ZmZTEiLCJpc3MiOiJzZXJ2aWNlZGVzay1qd3QtdG9rZW4taXNzdWVyIiwiY29udGV4dCI6eyJ1c2VyIjoiMTAxNzIiLCJpc3N1ZSI6IkRDUy0xMjczIn0sImV4cCI6MTc0ODg1NTA3MCwiaWF0IjoxNzQ2NDM1ODcwfQ.RwrgvdAe-0rnNPYYwjfZgTyYPVYIbJh-ysTW13mn9I0&amp;sda_source=notification-email\"><span style=\"color:#3572B0;text-decoration:none\">View\r\n request</span></a> <span class=\"jsd-link-separator\">·</span> <a href=\"https://dnext.atlassian.net/servicedesk/customer/portal/1/DCS-1273/unsubscribe?jwt=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJ0Z3QiOiJhbm9ueW1vdXMtbGluayIsInFzaCI6IjljNmE5MzQwZGQ4NTE5ZDhkZWZlNTljMTAxY2Q4YjQyYTFmMzFhYTUzNDVmOWRiMTlkZTAxM2E5N2QyMjIxZWYiLCJpc3MiOiJzZXJ2aWNlZGVzay1qd3QtdG9rZW4taXNzdWVyIiwiY29udGV4dCI6eyJ1c2VyIjoidWc6MDY0NzUyMTctZDAyYS00MmM1LWIyNWYtMzA5NzcxNGM3ZmYyIiwiaXNzdWUiOiJEQ1MtMTI3MyJ9LCJleHAiOjE3NDg4NTUwNzAsImlhdCI6MTc0NjQzNTg3MH0.V7L1P1c5ucFo6dbvI098lbiQKjhhHERjQmZRDH8D3G8\">\r\n<span style=\"color:#3572B0;text-decoration:none\">Turn off this request's notifications</span></a><o:p></o:p></span></p>\r\n<p class=\"jsd-request-sharedwith\"><span style=\"font-size:9.0pt;font-family:&quot;Arial&quot;,sans-serif;color:#707070\">This is shared with Roberto.Ruiz, Sami Jaballah, Mohamed Jebrane Ben Salem, and 2 other people.<o:p></o:p></span></p>\r\n<p><span style=\"font-size:10.5pt;font-family:&quot;Arial&quot;,sans-serif;color:#333333\"><a href=\"https://www.atlassian.com/software/jira/service-desk/powered-by?utm_medium=jira-in-product&amp;utm_source=jira_service_desk_email_footer&amp;utm_content=dnext\"><span style=\"font-size:9.0pt;color:#707070;text-decoration:none\">Powered\r\n by Jira Service Management</span></a><o:p></o:p></span></p>\r\n<div>\r\n<p class=\"MsoNormal\"><span style=\"font-size:1.0pt;font-family:&quot;Arial&quot;,sans-serif;color:#333333\">Sent on May 5, 2025 11:04:30 AM CEST\r\n<o:p></o:p></span></p>\r\n</div>\r\n<p class=\"MsoNormal\"><span style=\"font-size:10.5pt;font-family:&quot;Arial&quot;,sans-serif;color:#333333\"><img border=\"0\" width=\"1\" height=\"1\" style=\"width:.0104in;height:.0104in\" id=\"_x0000_i1025\" src=\"https://atlas-trk.prd.msg.ss-inf.net/q/oNRBxRmx_XAJHervIQOsdg~~/AAAAARA~/Imz00xVld9FgmN1R2zZGFdF7k4RKjiWFsD0hYRFo8UUv_l-IRHMVqSS5aLpN8J_kpwIUONwERcfhKjCjcjjE1Q~~\"></span><span style=\"font-size:10.5pt;font-family:&quot;Arial&quot;,sans-serif;color:#333333\"><o:p></o:p></span></p>\r\n</div>\r\n##########################################################<br><span>&nbsp;</span><div>The information contained in this communication is confidential and intended only for the person(s) or entity(ies) to which it is addressed. If you are not a named addressee, please notify the sender immediately, delete this email from your system and do not disclose the email or any part of it to any person. Any views or opinions expressed in this email are those of the author and do not necessarily represent the views of MCP (Switzerland) GmbH or any of its affiliates. Therefore, this communication is not intended as an offer or solicitation for the purchase or sale of any financial instrument or as an official confirmation of any transaction.&nbsp;<br><div>Electronic communications can be insecure and can contain errors, they can be intercepted, corrupted, lost, destroyed, incomplete or may contain viruses. Neither MCP (Switzerland) GmbH, its affiliates nor the sender can accept any liability for any kind of damages as the result of viruses or transmission errors or delays. Outgoing and incoming electronic communications of MCP (Switzerland) GmbH and its affiliates, including telephone communications, may be electronically archived and subject to review and/or disclosure to someone other than the recipient.<br><div>MCP (Switzerland) GmbH is a Swiss manager of collective assets authorized and regulated by the Swiss Financial Market Supervisory Authority (FINMA). MCP (Switzerland) GmbH is a limited liability company registered in Switzerland under company number CHE-216.367.660 and with its registered office at rue du Rhône 42, 1204 Geneva, Switzerland.<br><span>&nbsp;</span><br>##########################################################<span>&nbsp;</span></body>\r\n</html>\r\n",
      "conversation_id": "4187E9C0CC6C0B4C858F89782555A340",
      "entry_id": "000000009E3298A6443E984393DE69BAE1D39B3A07008F4B4B7A024B9B439BA456836AE1DD4900000000010C00008F4B4B7A024B9B439BA456836AE1DD490002A703573C0000",
      "size": 86604,
      "has_attachments": true,
      "attachments": [],
      "message_id": "GV2P191MB2381E30164AE0370EFF8FEAB8D8E2@GV2P191MB2381.EURP191.PROD.OUTLOOK.COM",
      "in_reply_to": "JIRA.30608.1746433769000.86c2d623-6d60-4c1c-9099-0306906166b8.1746435870732@Atlassian.JIRA",
      "references": "in-reply-to:\r\n   mime-version;\r\n  bh=/YyiLsx9xNPkWFTzea9gpGqyKOhdARsC2xul9MFG1tU=;\r\n  b=Z4cvQfm1VgIGoNAgxJ0t0Bw0zv/yo7DPT0S4hSrA86aNcCAVrFWQ/o7V\r\n   sI7ZREBZ7xcEVPQtVhRUKcbmZ9laGbNJpyTbj7CFTZ/CHE/f8/g4/wxI2\r\n   AVC+lqjCWNPFXV7AcjBbm2ZStiOiS4Rrab0TDA9PqIVQnPQL+LIaRHOTV\r\n   fGkIkAk3Id+014qO9vS36SMkMFSQO0soE82wtecWWov6un4LXibDs/zvV\r\n   c3Unbs6Ryhm2uqxvkdqF+czatGBgUT/XwlSRBXGlzhz7iVVNvoI/V8Mzo\r\n   y8+V6/QkI6F+vgqZsHh+vNn1JK6101OQ9bI70gpb0hHtQByCPyWezbVUe\r\n   w==;"
    }
  ],
  "subject": "RE: DCS-1273 RE: [EXTERNAL] DNEXT Platform - Update on data sharing "
}